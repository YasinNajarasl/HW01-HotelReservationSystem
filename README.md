# README.md – پروژه رزرو هتل (تمرین شماره ۱ – اصول SOLID)

## توصیف سیستم اولیه

سیستم رزرو هتل که در کلاس `Main` یک شیء `Customer` ساخته می‌شود، یک `Room` به او اختصاص داده می‌شود و اطلاعات رزرو در شیء `Reservation` ذخیره می‌گردد. فرآیند رزرو از طریق کلاس `ReservationService` و متد `makeReservation` انجام می‌شود. در این متد بر اساس نوع پرداخت و نوع اطلاع‌رسانی، پرداخت انجام شده و تأییدیه (به‌صورت پیش‌فرض ایمیل) برای مشتری ارسال می‌گردد.

[**کد اولیه پروژه**](https://github.com/YasinNajarasl/HW01-HotelReservationSystem/tree/main)

---

## ساختار پروژه

```
HW01-HotelReservationSystem/
├── Step-01-without-OOD/          → بدون رعایت اصول SOLID
├── Step-02-with-OOD/             → با رعایت کامل اصول SOLID + Self-Describing Registry
└── README.md                     → این فایل
```

---

## گام اول – افزودن دو قابلیت جدید (بدون رعایت SOLID)  
**پوشه:** `Step-01-without-OOD`

### تغییرات انجام‌شده

| ردیف | تغییرات مربوط به ارسال SMS                     | تغییرات مربوط به پرداخت حضوری                     |
|------|------------------------------------------------|--------------------------------------------------|
| ۱    | اضافه شدن متد `sendSmsMessage()` در `MessageSender` | اضافه شدن متد `processOnSitePayment()` در `PaymentProcessor` |
| ۲    | تغییر امضای `makeReservation()` (اضافه شدن پارامتر `notificationType`) | تغییر امضای `makeReservation()` (اضافه شدن پارامتر `paymentType`) |
| ۳    | اضافه شدن شرط `if ("sms".equals(...))` و فراخوانی `sendSmsMessage()` | اضافه شدن شرط `else if ("onsite".equals(...))` و فراخوانی `processOnSitePayment()` |
| ۴    | اضافه شدن متد `selectNotificationType()` در `Main` | اضافه شدن متد `selectPaymentType()` در `Main` |

**مجموع تغییرات:** **حداقل ۱۰–۱۲ تغییر** در **۴ کلاس مختلف**  
→ `ReservationService` به شدت تغییر کرد و پر از `if/else` شد.

---

## گام دوم – تحلیل اصول SOLID در کد اولیه + Step-01

| اصل     | وضعیت         | علت نقض / برقراری                                                                                   |
|---------|---------------|----------------------------------------------------------------------------------------------------|
| **SRP** | نقض شده       | `MessageSender` و `PaymentProcessor` چند مسئولیت دارند؛ `ReservationService` مسئولیت رزرو، پرداخت و اطلاع‌رسانی را همزمان دارد |
| **OCP** | نقض شده       | افزودن هر قابلیت جدید نیاز به تغییر چندین کلاس (به‌خصوص `ReservationService`) دارد                     |
| **LSP** | برقرار        | فعلاً زیرکلاس خاصی وجود ندارد، پس قابل نقض نیست                                                          |
| **ISP** | نقض شده       | `ReservationService` مجبور است از تمام متدهای کلاس‌های بزرگ استفاده کند                                     |
| **DIP** | نقض شده       | وابستگی مستقیم به کلاس‌های کنکریت (`MessageSender`, `PaymentProcessor`) به جای abstraction                   |
| **PLK** | نقض شده       | `ReservationService` از جزئیات پیاده‌سازی (`"sms"`, `"onsite"`) آگاه است                                    |

---

## گام سوم – اصلاح کامل با اصول SOLID  
**پوشه:** `Step-02-with-OOD`

### اقدامات انجام‌شده

| اقدام                                           | اصول اصلاح‌شده         | توضیح                                                                                     |
|------------------------------------------------|-------------------------|-------------------------------------------------------------------------------------------|
| ایجاد رابط‌های `INotificationMethod` و `IPaymentMethod` (Self-Describing) | DIP, ISP, SRP           | هر پیاده‌سازی خودش نام، نوع و گیرنده را مشخص می‌کند                                          |
| پیاده‌سازی‌های جداگانه (`EmailNotification`, `SmsNotification`, …) | SRP, OCP                | هر کلاس فقط یک مسئولیت دارد                                                             |
| پیاده‌سازی‌های پرداخت (`CreditCardPayment`, `OnSitePayment`, ...) | SRP, OCP                | هر کلاس فقط یک روش پرداخت را مدیریت می‌کند                                                  |
| ایجاد **Self-Describing Registry** (`NotificationRegistry`, `PaymentRegistry`) | OCP, DIP                | ثبت مرکزی و کاملاً دینامیک – افزودن قابلیت جدید فقط با یک خط `register()`                  |
| حذف تمام `if/else` و `String` از `ReservationService` | SRP, OCP, DIP, PLK      | سرویس رزرو اکنون کاملاً شفاف و بدون دانش از پیاده‌سازی‌هاست                                  |
| منوی کاملاً دینامیک در `Main`                        | OCP                     | منو به‌صورت خودکار از Registry پر می‌شود                                                    |

**نتیجه:**  
برای افزودن هر روش جدید (مثل Telegram، PayPal، ZarinPal، WhatsApp و …) **فقط کافی است یک کلاس جدید بسازیم و یک خط در Registry اضافه کنیم** – **هیچ تغییری در `ReservationService` یا `Main` لازم نیست**.

---

## گام چهارم – ارزیابی و مقایسه دو رویکرد

| معیار                                   | Step-01 (بدون SOLID)               | Step-02 (با SOLID + Registry)            | بهبود        |
|-----------------------------------------|-------------------------------------|-------------------------------------------|--------------|
| افزودن ارسال پیامک                       | ۵–۶ تغییر                           | **۱ کلاس + ۱ خط در Registry**             | ~۹۵٪        |
| افزودن پرداخت حضوری                     | ۵–۶ تغییر                           | **۱ کلاس + ۱ خط در Registry**             | ~۹۵٪        |
| افزودن PayPal یا WhatsApp                | نیاز به ۸–۱۰ تغییر در چندین کلاس     | **فقط ۳ خط کد**                           | ~۹۹٪        |
| تغییر در `ReservationService`           | بله – چندین `if/else` اضافه شد     | **خیر – کاملاً بدون تغییر**               | ۱۰۰٪        |
| منوی پرداخت/اطلاع‌رسانی                | دستی                               | **کاملاً دینامیک و خودکار**              | +∞          |
| قابلیت تست (Unit Test)                   | بسیار سخت                          | **بسیار آسان** (Mock رابط‌ها)             | عالی         |
| امکان توسعه در آینده                     | پایین                              | **نامحدود**                               | انقلابی      |

---

## گام پنجم – نتیجه‌گیری

رعایت **اصول SOLID** به همراه **Self-Describing Registry Pattern** تأثیر شگفت‌انگیزی بر کیفیت نرم‌افزار دارد:

1. **کاهش چشمگیر تغییرات**  
   → از بیش از **۱۰ تغییر پراکنده** به **فقط ۱–۳ خط کد** برای هر قابلیت جدید

2. **نگهداری و توسعه آسان**  
   → افزودن قابلیت‌های جدید بدون ریسک شکستن کد موجود

3. **تفکیک کامل مسئولیت‌ها**  
   → هر کلاس فقط یک کار مشخص انجام می‌دهد

4. **شفافیت کامل سرویس اصلی**  
   → `ReservationService` هیچ اطلاعی از نحوه پرداخت یا ارسال پیام ندارد

5. **منوهای دینامیک و خودکار**  
   → کاربر همیشه آخرین روش‌های موجود را می‌بیند

6. **تست‌پذیری ۱۰۰٪**  
   → به راحتی می‌توان رابط‌ها را Mock کرد

**نتیجه نهایی:**  
اگر از ابتدا اصول SOLID و الگوی Registry رعایت می‌شد، تقریباً **تمام تغییرات گام اول حذف می‌شدند** و دو قابلیت جدید فقط با **۲ کلاس جدید + ۲ خط در Registry** اضافه می‌شدند.

این پروژه یک نمونه عملی و کامل از تبدیل یک کد شکننده و سخت‌نگهداری به یک معماری **انعطاف‌پذیر، قابل توسعه و پایدار** با استفاده از اصول طراحی شیء‌گرا است.

---